@page "/"
@rendermode InteractiveServer
@layout LandingLayout
@inject NavigationManager Navigation

<PageTitle>CARTRIDGE - Your Gaming Universe</PageTitle>

<div class="landing-container">
    <!-- Hero Section -->
    <section class="hero-section">
        <div class="hero-content">
            <div class="title-wrapper">
                <h1 class="hero-title">
                    <span class="title-line">🎮 CARTRIDGE 🎮</span>
                    <span class="title-subtitle">YOUR GAMING UNIVERSE</span>
                </h1>
            </div>
            
            <p class="hero-description">
                ALL YOUR GAMES FROM EVERY PLATFORM<br/>
                IN ONE EPIC RETRO INTERFACE
            </p>

            <div class="cta-buttons">
                <button class="btn-retro btn-large" @onclick="NavigateToSignUp">
                    ► START YOUR ADVENTURE ◄
                </button>
                <button class="btn-retro btn-retro-secondary btn-large" @onclick="NavigateToSignIn">
                    ► SIGN IN ◄
                </button>
            </div>

            <div class="platform-badges">
                <div class="platform-badge-item">Steam</div>
                <div class="platform-badge-item">Epic</div>
                <div class="platform-badge-item">GOG</div>
                <div class="platform-badge-item">Ubisoft</div>
                <div class="platform-badge-item">Rockstar</div>
                <div class="platform-badge-item">Amazon</div>
            </div>
        </div>
    </section>

    <!-- Animated Demo Section -->
    <section class="demo-section">
        <h2 class="section-title">
            ◄◄◄ LIVE DEMO ►►►
        </h2>
        
        <div class="demo-stats">
            <div class="demo-stat-box pulse">
                <div class="stat-number">@animatedGameCount</div>
                <div class="stat-label">GAMES COLLECTED</div>
            </div>
            <div class="demo-stat-box pulse-delayed">
                <div class="stat-number">@animatedPlatforms</div>
                <div class="stat-label">PLATFORMS CONNECTED</div>
            </div>
            <div class="demo-stat-box pulse-more-delayed">
                <div class="stat-number">@animatedHours</div>
                <div class="stat-label">HOURS PLAYED</div>
            </div>
        </div>

        <div class="demo-games-carousel">
            @foreach (var game in demoGames)
            {
                <div class="demo-game-card @(game.IsActive ? "active" : "")">
                    <div class="demo-game-icon">@game.Icon</div>
                    <div class="demo-game-title">@game.Title</div>
                    <div class="demo-game-platform">@game.Platform</div>
                </div>
            }
        </div>
    </section>

    <!-- Features Section -->
    <section class="features-section">
        <h2 class="section-title">
            ◄ LEGENDARY FEATURES ►
        </h2>
        
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">🌟</div>
                <h3 class="feature-title">UNIFIED LIBRARY</h3>
                <p class="feature-text">
                    SEE ALL YOUR GAMES FROM STEAM, EPIC, GOG, AND MORE IN ONE PLACE
                </p>
            </div>

            <div class="feature-card">
                <div class="feature-icon">📊</div>
                <h3 class="feature-title">TRACK STATS</h3>
                <p class="feature-text">
                    MONITOR YOUR PLAYTIME AND GAMING ACHIEVEMENTS ACROSS PLATFORMS
                </p>
            </div>

            <div class="feature-card">
                <div class="feature-icon">🎯</div>
                <h3 class="feature-title">MANUAL ADDING</h3>
                <p class="feature-text">
                    ADD GAMES MANUALLY WITH AUTOMATIC COVER ART AND METADATA
                </p>
            </div>

            <div class="feature-card">
                <div class="feature-icon">🔄</div>
                <h3 class="feature-title">AUTO SYNC</h3>
                <p class="feature-text">
                    AUTOMATIC SYNCHRONIZATION WITH YOUR GAMING PLATFORMS
                </p>
            </div>

            <div class="feature-card">
                <div class="feature-icon">🎨</div>
                <h3 class="feature-title">RETRO STYLE</h3>
                <p class="feature-text">
                    CLASSIC PIXEL ART INTERFACE WITH MODERN FUNCTIONALITY
                </p>
            </div>

            <div class="feature-card">
                <div class="feature-icon">🔒</div>
                <h3 class="feature-title">SECURE & PRIVATE</h3>
                <p class="feature-text">
                    YOUR DATA IS ENCRYPTED AND STORED SECURELY
                </p>
            </div>
        </div>
    </section>

    <!-- Call to Action -->
    <section class="final-cta">
        <h2 class="cta-title">READY TO START?</h2>
        <p class="cta-description">
            JOIN THOUSANDS OF GAMERS WHO HAVE<br/>
            UNIFIED THEIR GAMING LIBRARIES
        </p>
        <button class="btn-retro btn-xlarge" @onclick="NavigateToSignUp">
            ► CREATE YOUR ACCOUNT NOW ◄
        </button>
        <p class="cta-note">
            FREE FOREVER • NO CREDIT CARD REQUIRED
        </p>
    </section>
</div>

@code {
    private int animatedGameCount;
    private int animatedPlatforms;
    private int animatedHours;
    private Timer? animationTimer;
    private Timer? carouselTimer;
    
    private class DemoGame
    {
        public string Icon { get; set; } = "";
        public string Title { get; set; } = "";
        public string Platform { get; set; } = "";
        public bool IsActive { get; set; }
    }
    
    private List<DemoGame> demoGames = new();
    private int currentGameIndex;

    protected override void OnInitialized()
    {
        // Initialize demo games
        demoGames = new List<DemoGame>
        {
            new DemoGame { Icon = "🎮", Title = "CYBERPUNK 2077", Platform = "STEAM", IsActive = true },
            new DemoGame { Icon = "⚔️", Title = "THE WITCHER 3", Platform = "GOG" },
            new DemoGame { Icon = "🏎️", Title = "FORZA HORIZON 5", Platform = "STEAM" },
            new DemoGame { Icon = "🔫", Title = "VALORANT", Platform = "EPIC" },
            new DemoGame { Icon = "🌍", Title = "RED DEAD REDEMPTION 2", Platform = "ROCKSTAR" },
            new DemoGame { Icon = "🎯", Title = "RAINBOW SIX SIEGE", Platform = "UBISOFT" },
            new DemoGame { Icon = "👾", Title = "HADES", Platform = "EPIC" },
            new DemoGame { Icon = "🗡️", Title = "ELDEN RING", Platform = "STEAM" }
        };

        // Start counter animation
        animationTimer = new Timer(_ =>
        {
            InvokeAsync(() =>
            {
                if (animatedGameCount < 247)
                    animatedGameCount += 7;
                if (animatedPlatforms < 6)
                    animatedPlatforms++;
                if (animatedHours < 1234)
                    animatedHours += 43;
                
                StateHasChanged();
            });
        }, null, TimeSpan.FromMilliseconds(50), TimeSpan.FromMilliseconds(50));

        // Start carousel animation
        carouselTimer = new Timer(_ =>
        {
            InvokeAsync(() =>
            {
                demoGames[currentGameIndex].IsActive = false;
                currentGameIndex = (currentGameIndex + 1) % demoGames.Count;
                demoGames[currentGameIndex].IsActive = true;
                StateHasChanged();
            });
        }, null, TimeSpan.FromSeconds(2), TimeSpan.FromSeconds(2));
    }

    private void NavigateToSignUp()
    {
        Navigation.NavigateTo("/signup");
    }

    private void NavigateToSignIn()
    {
        Navigation.NavigateTo("/signin");
    }

    public void Dispose()
    {
        animationTimer?.Dispose();
        carouselTimer?.Dispose();
    }
}

