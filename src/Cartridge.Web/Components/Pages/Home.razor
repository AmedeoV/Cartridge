@page "/"
@rendermode InteractiveServer
@layout LandingLayout
@inject NavigationManager Navigation

<PageTitle>CARTRIDGE - Your Gaming Universe</PageTitle>

<div class="landing-container">
    <!-- Hero Section -->
    <section class="hero-section">
        <div class="hero-content">
            <div class="title-wrapper">
                <h1 class="hero-title">
                    <span class="title-line">🎮 CARTRIDGE 🎮</span>
                    <span class="title-subtitle">YOUR GAMING UNIVERSE</span>
                </h1>
            </div>
            
            <p class="hero-description">
                ALL YOUR GAMES FROM EVERY PLATFORM<br/>
                IN ONE EPIC RETRO INTERFACE
            </p>

            <div class="cta-buttons">
                <button class="btn-retro btn-large" @onclick="NavigateToSignUp">
                    ► START YOUR ADVENTURE ◄
                </button>
                <button class="btn-retro btn-retro-secondary btn-large" @onclick="NavigateToSignIn">
                    ► SIGN IN ◄
                </button>
            </div>

            <div class="platform-badges">
                <div class="platform-badge-item">Steam</div>
                <div class="platform-badge-item">Epic</div>
                <div class="platform-badge-item">GOG</div>
                <div class="platform-badge-item">Ubisoft</div>
                <div class="platform-badge-item">Rockstar</div>
                <div class="platform-badge-item">Amazon</div>
            </div>
        </div>
    </section>

    <!-- Animated Demo Section -->
    <section class="demo-section">
        <h2 class="section-title">
            ◄◄◄ LIVE DEMO ►►►
        </h2>
        
        <div class="demo-stats">
            <div class="demo-stat-box pulse">
                <div class="stat-number">@animatedGameCount</div>
                <div class="stat-label">GAMES COLLECTED</div>
            </div>
            <div class="demo-stat-box pulse-delayed">
                <div class="stat-number">@animatedPlatforms</div>
                <div class="stat-label">PLATFORMS CONNECTED</div>
            </div>
            <div class="demo-stat-box pulse-more-delayed">
                <div class="stat-number">@animatedHours</div>
                <div class="stat-label">HOURS PLAYED</div>
            </div>
        </div>

        <div class="demo-games-carousel">
            @foreach (var game in demoGames)
            {
                <div class="demo-game-card @(game.IsActive ? "active" : "")">
                    <div class="demo-game-icon">@game.Icon</div>
                    <div class="demo-game-title">@game.Title</div>
                    <div class="demo-game-platform">@game.Platform</div>
                </div>
            }
        </div>
    </section>

    <!-- Features Section -->
    <section class="features-section">
        <h2 class="section-title">
            ◄ LEGENDARY FEATURES ►
        </h2>
        
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">🌟</div>
                <h3 class="feature-title">UNIFIED LIBRARY</h3>
                <p class="feature-text">
                    SEE ALL YOUR GAMES FROM STEAM, EPIC, GOG, AND MORE IN ONE PLACE
                </p>
            </div>

            <div class="feature-card">
                <div class="feature-icon">📊</div>
                <h3 class="feature-title">TRACK STATS</h3>
                <p class="feature-text">
                    MONITOR YOUR PLAYTIME AND GAMING ACHIEVEMENTS ACROSS PLATFORMS
                </p>
            </div>

            <div class="feature-card">
                <div class="feature-icon">🎯</div>
                <h3 class="feature-title">MANUAL ADDING</h3>
                <p class="feature-text">
                    ADD GAMES MANUALLY WITH AUTOMATIC COVER ART AND METADATA
                </p>
            </div>

            <div class="feature-card">
                <div class="feature-icon">🔄</div>
                <h3 class="feature-title">AUTO SYNC</h3>
                <p class="feature-text">
                    AUTOMATIC SYNCHRONIZATION WITH YOUR GAMING PLATFORMS
                </p>
            </div>

            <div class="feature-card">
                <div class="feature-icon">🎨</div>
                <h3 class="feature-title">RETRO STYLE</h3>
                <p class="feature-text">
                    CLASSIC PIXEL ART INTERFACE WITH MODERN FUNCTIONALITY
                </p>
            </div>

            <div class="feature-card">
                <div class="feature-icon">🔒</div>
                <h3 class="feature-title">SECURE & PRIVATE</h3>
                <p class="feature-text">
                    YOUR DATA IS ENCRYPTED AND STORED SECURELY
                </p>
            </div>
        </div>
    </section>

    <!-- Call to Action -->
    <section class="final-cta">
        <h2 class="cta-title">READY TO START?</h2>
        <p class="cta-description">
            JOIN THOUSANDS OF GAMERS WHO HAVE<br/>
            UNIFIED THEIR GAMING LIBRARIES
        </p>
        <button class="btn-retro btn-xlarge" @onclick="NavigateToSignUp">
            ► CREATE YOUR ACCOUNT NOW ◄
        </button>
        <p class="cta-note">
            FREE FOREVER • NO CREDIT CARD REQUIRED
        </p>
        <div style="margin-top: 40px; padding-top: 30px; border-top: 2px dashed var(--retro-border);">
            <a href="https://github.com/AmedeoV/Cartridge" target="_blank" rel="noopener noreferrer" style="color: var(--retro-accent); text-decoration: none; display: inline-flex; align-items: center; gap: 8px; border: 2px solid var(--retro-accent); padding: 10px 20px; transition: all 0.2s; background: rgba(0, 0, 0, 0.3); font-size: 10px;">
                <svg height="18" width="18" viewBox="0 0 16 16" fill="currentColor" style="display: inline-block;">
                    <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/>
                </svg>
                VIEW ON GITHUB • OPEN SOURCE
            </a>
        </div>
    </section>
</div>

@code {
    private int animatedGameCount;
    private int animatedPlatforms;
    private int animatedHours;
    private Timer? animationTimer;
    private Timer? carouselTimer;
    
    private class DemoGame
    {
        public string Icon { get; set; } = "";
        public string Title { get; set; } = "";
        public string Platform { get; set; } = "";
        public bool IsActive { get; set; }
    }
    
    private List<DemoGame> demoGames = new();
    private int currentGameIndex;

    protected override void OnInitialized()
    {
        // Initialize demo games
        demoGames = new List<DemoGame>
        {
            new DemoGame { Icon = "🎮", Title = "CYBERPUNK 2077", Platform = "STEAM", IsActive = true },
            new DemoGame { Icon = "⚔️", Title = "THE WITCHER 3", Platform = "GOG" },
            new DemoGame { Icon = "🏎️", Title = "FORZA HORIZON 5", Platform = "STEAM" },
            new DemoGame { Icon = "🔫", Title = "VALORANT", Platform = "EPIC" },
            new DemoGame { Icon = "🌍", Title = "RED DEAD REDEMPTION 2", Platform = "ROCKSTAR" },
            new DemoGame { Icon = "🎯", Title = "RAINBOW SIX SIEGE", Platform = "UBISOFT" },
            new DemoGame { Icon = "👾", Title = "HADES", Platform = "EPIC" },
            new DemoGame { Icon = "🗡️", Title = "ELDEN RING", Platform = "STEAM" }
        };

        // Start counter animation
        animationTimer = new Timer(_ =>
        {
            InvokeAsync(() =>
            {
                if (animatedGameCount < 247)
                    animatedGameCount += 7;
                if (animatedPlatforms < 6)
                    animatedPlatforms++;
                if (animatedHours < 1234)
                    animatedHours += 43;
                
                StateHasChanged();
            });
        }, null, TimeSpan.FromMilliseconds(50), TimeSpan.FromMilliseconds(50));

        // Start carousel animation
        carouselTimer = new Timer(_ =>
        {
            InvokeAsync(() =>
            {
                demoGames[currentGameIndex].IsActive = false;
                currentGameIndex = (currentGameIndex + 1) % demoGames.Count;
                demoGames[currentGameIndex].IsActive = true;
                StateHasChanged();
            });
        }, null, TimeSpan.FromSeconds(2), TimeSpan.FromSeconds(2));
    }

    private void NavigateToSignUp()
    {
        Navigation.NavigateTo("/signup");
    }

    private void NavigateToSignIn()
    {
        Navigation.NavigateTo("/signin");
    }

    public void Dispose()
    {
        animationTimer?.Dispose();
        carouselTimer?.Dispose();
    }
}

